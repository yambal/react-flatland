(this["webpackJsonp@yambal/react-flatland"]=this["webpackJsonp@yambal/react-flatland"]||[]).push([[0],{12:function(e,t,n){e.exports=n(19)},19:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(6),i=n.n(c),o=n(1),u=r.createContext([]),l=function(e){var t=e.assets,n=void 0===t?[]:t,a=r.useState([]),c=Object(o.a)(a,2),i=c[0],l=c[1];return r.useEffect((function(){var e=n.map((function(e){return fetch(e).then((function(e){return e.blob()})).then((function(t){var n=URL.createObjectURL(t),r=document.createElement("img");return r.src=n,new Promise((function(t,a){r.onload=function(){var a={key:e,url:n,width:r.width,height:r.height};t(a)}}))}))}));Promise.all(e).then((function(e){console.log("assets",e),l(e)}))}),[]),r.createElement(u.Provider,{value:i},e.children)},s=r.createContext(0),f=function(e){var t=e.fps,n=void 0===t?15:t,a=r.useState(1e3/n),c=Object(o.a)(a,2),i=c[0],u=c[1],l=r.useState(0),f=Object(o.a)(l,2),m=f[0],h=f[1],p=r.useState(0),d=Object(o.a)(p,2),v=d[0],g=d[1],x=r.useState(0),E=Object(o.a)(x,2),b=E[0],w=E[1];r.useEffect((function(){u(1e3/n)}),[n]);var y=r.useCallback((function(e){g(e);var t=Math.floor(e/i);b!==t&&w(t),h(requestAnimationFrame(y))}),[b,v,i]);return r.useEffect((function(){return u(1e3/n),h(requestAnimationFrame(y)),function(){cancelAnimationFrame(m)}}),[]),r.createElement(s.Provider,{value:b},e.children)},m=function(e){var t=r.useContext(s);return r.createElement("text",{x:"0",y:"35",fontSize:"14"},t)},h=function(){return r.createElement("defs",{id:"def-root"})},p=function(e){var t=e.width,n=void 0===t?480:t,a=e.height,c=void 0===a?480:a,i=e.assets,o=void 0===i?[]:i,u=e.fps,s=void 0===u?15:u;return r.createElement(l,{assets:o},r.createElement(f,{fps:s},r.createElement("svg",{width:n,height:c,viewBox:"0 0 ".concat(n," ").concat(c)},r.createElement(h,null),e.children,r.createElement(m,null))))},d=n(7),v=n(8),g=n(21);function x(){var e=Object(d.a)(["\n  clip-path: polygon(\n    ","px ","px,\n    ","px ","px,\n    ","px ","px,\n    ","px ","px\n  )\n"]);return x=function(){return e},e}var E=v.a.image(x(),(function(e){return e.clipLeft}),(function(e){return e.clipTop}),(function(e){return e.clipLeft+e.clipWidth}),(function(e){return e.clipTop}),(function(e){return e.clipLeft+e.clipWidth}),(function(e){return e.clipTop+e.clipHeight}),(function(e){return e.clipLeft}),(function(e){return e.clipTop+e.clipHeight})),b=function(e){var t=r.useContext(u),n=e.x,a=void 0===n?0:n,c=e.y,i=void 0===c?0:c,l=e.width,s=void 0===l?32:l,f=e.height,m=void 0===f?32:f,h=e.url,p=e.frame,d=void 0===p?0:p,v=r.useState(Object(g.a)()),x=Object(o.a)(v,2),b=x[0],w=(x[1],r.useState("")),y=Object(o.a)(w,2),j=y[0],O=y[1],S=r.useState(s),k=Object(o.a)(S,2),L=k[0],C=k[1],T=r.useState(m),W=Object(o.a)(T,2),A=W[0],F=W[1],H=r.useState([]),M=Object(o.a)(H,2),P=M[0],B=M[1],q=r.useState(0),J=Object(o.a)(q,2),R=J[0],U=J[1],z=r.useState(0),I=Object(o.a)(z,2),N=I[0],$=I[1];return r.useEffect((function(){var e=t.find((function(e){return e.key===h}));if(e&&j!==e.url){C(e.width),F(e.height);for(var n=[],r=0;r<Math.floor(e.height/m);r++)for(var a=0;a<Math.floor(e.width/s);a++){var c={x:a*s,y:r*s};n.push(c)}B(n),O(e.url)}}),[h,t,s,m]),r.useEffect((function(){P[d]&&(U(P[d].x),$(P[d].y))}),[P,d]),console.log("render"),r.createElement(r.Fragment,null,r.createElement(E,{width:L,height:A,clipHeight:s,clipWidth:m,clipLeft:R,clipTop:N,x:a-R,y:i-N,xlinkHref:j,onClick:function(){console.log(b)}}))};var w=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(p,{assets:["./images/64x64.png"]},a.a.createElement(b,{url:"./images/64x64.png",x:32,y:0,frame:1}),a.a.createElement(b,{url:"./images/64x64.png",x:0,y:32,frame:2}),a.a.createElement(b,{url:"./images/64x64.png",x:64,y:32,frame:2}),a.a.createElement(b,{url:"./images/64x64.png",x:96,y:0,frame:1})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.290c2b9f.chunk.js.map